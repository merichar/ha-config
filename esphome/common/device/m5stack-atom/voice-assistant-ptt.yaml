# Push-to-talk voice assistant with simple LED feedback
# Requires: i2s, mic, speaker modules
# Button behavior defined in device file via !extend atom_button

voice_assistant:
  id: va
  microphone: echo_microphone
  speaker: echo_speaker
  noise_suppression_level: 2
  auto_gain: 31dBFS
  volume_multiplier: 4.0
  on_listening:
    - light.turn_on:
        id: led
        blue: 100%
        red: 0%
        green: 0%
        brightness: 100%
  on_tts_start:
    - light.turn_on:
        id: led
        blue: 0%
        red: 0%
        green: 100%
        brightness: 100%
  on_error:
    - light.turn_on:
        id: led
        red: 100%
        green: 0%
        blue: 0%
        brightness: 100%
    - delay: 2s
    - light.turn_off:
        id: led
  on_end:
    - light.turn_off:
        id: led
